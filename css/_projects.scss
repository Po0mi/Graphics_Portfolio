.projects {
  @include section-base;
  scroll-snap-align: start;

  .projects-wrapper {
    position: relative;
    width: 100%;
    height: 100%;

    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: url(/assets/doodle-bg.jpg);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      filter: brightness(0.3) saturate(1.5);
      z-index: -1;
    }

    .grunge-overlay {
      position: absolute;
      inset: 0;
      background-image: url(/assets/grunge-overlay.jpg);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      opacity: 0.3;
      mix-blend-mode: multiply;
      z-index: 10;
      pointer-events: none;
    }

    .projects-container {
      @include container-grid;
      position: relative;
      z-index: 2;

      h1 {
        font-size: clamp(5rem, 8vw, 10rem);
        grid-area: 1/3/2/6;
        text-align: center;
        color: white;
        font-family: "Barrio", system-ui;
        align-self: center;
        line-height: 0.9;

        span {
          color: #ff8c00;
        }
      }

      // Gallery
      .projects-gallery {
        grid-area: 3/2/4/7;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        overflow: hidden;
        transform: skew(5deg);
        align-self: center;

        .card {
          flex: 1;
          transition: all 1s ease-in-out;
          height: 75vmin;
          max-height: 600px;
          min-height: 400px;
          position: relative;
          cursor: pointer;

          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 1s ease-in-out;
            filter: grayscale(100%) brightness(0.5);
          }

          .card__head {
            color: $h2-text;
            background: rgba(255, 140, 0, 0.85);
            padding: 0.5em;
            transform: rotate(-90deg);
            transform-origin: 0% 0%;
            transition: all 0.5s ease-in-out;
            min-width: 100%;
            text-align: center;
            position: absolute;
            bottom: 0;
            left: 0;
            font-size: 1em;
            white-space: nowrap;
            font-family: "Barrio", system-ui;
            font-weight: 500;
            letter-spacing: 0.05em;
          }

          &:hover {
            flex-grow: 10;

            img {
              filter: grayscale(0) brightness(1);
            }

            .card__head {
              text-align: center;
              top: calc(100% - 2em);
              color: white;
              background: rgba(0, 0, 0, 0.7);
              font-size: 2em;
              transform: rotate(0deg) skew(-5deg);
              backdrop-filter: blur(10px);
            }
          }

          &:not(:last-child) {
            margin-right: 1em;
          }
        }
      }
    }
  }
}

// Tablet responsive
@media (max-width: 1024px) {
  .projects {
    .projects-wrapper {
      &::before {
        background-attachment: scroll;
      }

      .projects-container {
        h1 {
          font-size: clamp(4rem, 7vw, 8rem);
          grid-area: 2/2/3/7;
        }

        .projects-gallery {
          grid-area: 3/2/4/7;
          transform: skew(3deg);

          .card {
            height: 65vmin;
            max-height: 500px;
            min-height: 350px;

            .card__head {
              font-size: 0.9em;
            }

            &:hover .card__head {
              font-size: 1.8em;
            }

            &:not(:last-child) {
              margin-right: 0.8em;
            }
          }
        }
      }
    }
  }
}

// Mobile responsive
@media (max-width: 768px) {
  .projects {
    .projects-wrapper {
      &::before {
        background-attachment: scroll;
      }

      .projects-container {
        h1 {
          font-size: clamp(3rem, 10vw, 6rem);
          grid-area: 2/2/3/7;
        }

        .projects-gallery {
          grid-area: 3/2/4/7;
          flex-direction: column;
          transform: skew(0deg);
          gap: 1rem;
          height: auto;

          .card {
            width: 100%;
            height: 40vmin;
            min-height: 200px;
            max-height: 300px;

            img {
              filter: grayscale(50%) brightness(0.7);
            }

            .card__head {
              font-size: 1em;
              transform: rotate(0deg);
              position: relative;
              bottom: auto;
              left: auto;
              top: auto;
              background: rgba(255, 140, 0, 0.9);
              padding: 1em;
            }

            &:hover {
              flex-grow: 1;

              img {
                filter: grayscale(0) brightness(1);
              }

              .card__head {
                font-size: 1.2em;
                background: rgba(0, 0, 0, 0.8);
                transform: none;
              }
            }

            &:not(:last-child) {
              margin-right: 0;
            }
          }
        }
      }
    }
  }
}

// Small mobile
@media (max-width: 480px) {
  .projects {
    .projects-wrapper {
      .projects-container {
        h1 {
          font-size: clamp(2.5rem, 12vw, 4.5rem);
          grid-area: 2/2/3/7;
        }

        .projects-gallery {
          grid-area: 3/2/4/7;
          gap: 0.8rem;

          .card {
            height: 35vmin;
            min-height: 180px;

            .card__head {
              font-size: 0.9em;
              padding: 0.8em;
            }

            &:hover .card__head {
              font-size: 1em;
            }
          }
        }
      }
    }
  }
}
